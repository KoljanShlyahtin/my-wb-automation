// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
var corridorLightDevice = getDevice("corridor_light");

if (!corridorLightDevice) {
    // –ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë–º –µ–≥–æ
    defineVirtualDevice('corridor_light', {
        title: { en: 'Corridor Light', ru: '–°–≤–µ—Ç –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ' },
        cells: {
            master_switch: {
                title: { en: 'Master Switch', ru: '–°–≤–µ—Ç–æ–≤—ã–µ –ª–∏–Ω–∏–∏' },
                type: "switch",
                value: false,
                description: "–í–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç –æ–±–∞ –∫–∞–Ω–∞–ª–∞ CCT1 –∏ CCT2 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ"
            }
        }
    });
    log("‚úÖ –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ 'corridor_light' —Å–æ–∑–¥–∞–Ω–æ.");
} else {
    log("‚ÑπÔ∏è –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ 'corridor_light' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.");
}

// –ü—Ä–∞–≤–∏–ª–æ: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —Å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–∞–º–∏
// (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç—Ä–∞–∂–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –ø—Ä–∏ —Ä—É—á–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏)
 defineRule("corridor_sync_status", {
     whenChanged: ["wb-led_56/CCT1", "wb-led_56/CCT2"],
     then: function (newValue, devName, cellName) {
         // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞: –µ—Å–ª–∏ –æ–±–∞ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–∞ –≤—ã–∫–ª—é—á–µ–Ω—ã, –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å = false
         // –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–∫–ª—é—á–µ–Ω, –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å = true
         var cct1State = dev["wb-led_56/CCT1"];
         var cct2State = dev["wb-led_56/CCT2"];
         var masterState = cct1State || cct2State; // true, –µ—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω true
         dev["corridor_light/master_switch"] = masterState;
         log("üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞: CCT1={}, CCT2={}, Master={}", cct1State, cct2State, masterState);
     }
 });

// –ü—Ä–∞–≤–∏–ª–æ: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–∞–º–∏ –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
defineRule("corridor_control_rule", {
    whenChanged: "corridor_light/master_switch",
    then: function (newValue, devName, cellName) {
        log("üí° –£–ø—Ä–∞–≤–ª—è—é—â–∏–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∫–æ—Ä–∏–¥–æ—Ä–∞ –∏–∑–º–µ–Ω–∏–ª –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞: {}", newValue);
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±–∞ –∫–∞–Ω–∞–ª–∞ –Ω–∞ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
        dev["wb-led_56/CCT1"] = newValue;
        dev["wb-led_56/CCT2"] = newValue;
        log("‚úÖ –û–±–∞ –∫–∞–Ω–∞–ª–∞ –∫–æ—Ä–∏–¥–æ—Ä–∞ (CCT1 –∏ CCT2) —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤: {}", newValue ? "–í–ö–õ" : "–í–´–ö–õ");
    }
});